from selenium import webdriver
from selenium.webdriver.support.ui import WebDriverWait# xialakuangyongs
from selenium.webdriver.common.keys import Keys
import time
import os

browser = webdriver.Firefox()
time.sleep(2)
browser.maximize_window()
time.sleep(2)
browser.get("http://localhost:3000/index")
time.sleep(2)
browser.refresh()
time.sleep(3)
browser.find_element_by_css_selector("span.glyphicon.glyphicon-user").click()
time.sleep(2)
browser.find_element_by_id("username").send_keys("cmm")
time.sleep(1)
browser.find_element_by_id("password").send_keys("cmm")
time.sleep(1)
browser.find_element_by_css_selector(".btn.btn-primary.btn-large").click()
time.sleep(2)
browser.switch_to_alert().accept()
time.sleep(5)

browser.find_element_by_link_text('PUBLISH').click()
WebDriverWait(browser, 10).until(lambda the_driver: the_driver.find_element_by_id('subMenu').is_displayed())
# menu = browser.find_element_by_id('subMenu').find_element_by_link_text('PUBLISH RECIPE')
# webdriver.ActionChains(browser).move_to_element(menu).perform()
browser.find_element_by_link_text('PUBLISH RECIPE').click()
time.sleep(2)
browser.find_element_by_id("difficult").find_element_by_xpath("//option[@value='Middle Level']").click()
browser.find_element_by_id("cookTime").find_element_by_xpath("//option[@value='30 - 60 minutes']").click()
browser.find_element_by_id("photo").send_keys('/home/cmm/Desktop/modify1/Images/s3.jpg')
time.sleep(5)
browser.switch_to_alert().accept()
time.sleep(5)
browser.find_element_by_id('recipeName').send_keys("Gong Bao Ji Ding")
browser.find_element_by_id('description').send_keys("Such a deliciois dish, I can't like it more!")
browser.find_element_by_id('moreM').click()
time.sleep(1)
browser.find_element_by_id('moreM').click()
time.sleep(1)
browser.find_element_by_id('lessM').click()
time.sleep(1)
browser.find_elements_by_id('materialName')[0].send_keys("Chicken meat")
time.sleep(1)
browser.find_elements_by_id('amount')[0].send_keys("500g")
time.sleep(1)
browser.find_elements_by_id('materialName')[1].send_keys("Cong")
time.sleep(1)
browser.find_elements_by_id('amount')[1].send_keys("20g")
time.sleep(1)
browser.find_element_by_id('moreS').click()
time.sleep(1)
browser.find_element_by_id('lessS').click()
time.sleep(1)
browser.find_element_by_id('stepExplain').send_keys("You put all the things you have in the guo, add some tiao wei liao, you will get it")
time.sleep(1)
browser.find_element_by_id("stepPhoto").send_keys('/home/cmm/Desktop/modify1/Images/3as.jpg')
time.sleep(5)
browser.switch_to_alert().accept()
time.sleep(5)
browser.find_element_by_css_selector(".btn.btn-primary.btn-large.pull-right").click()
time.sleep(5)
browser.switch_to_alert().accept()
time.sleep(5)
browser.find_element_by_link_text('RECIPE').click()

time.sleep(3)
browser.quit()
